<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" th:href="@{/images/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/register.css?v=2}">
    <title>Registro</title>
</head>
<body>
<div class="container">
    <h1>Registro</h1>

    <form th:action="@{/register}" method="post">
        <div th:if="${messageerror}" class="error-message">
            <span th:text="${messageerror}"></span>
        </div>
        <div th:if="${message}" class="message">
            <span th:text="${message}"></span>
        </div>

        <div class="form-group">
            <label for="nombre">
                Nombre <span class="required">*</span>
                <span class="field-hint">Solo letras mayúsculas</span>
            </label>
            <input type="text" id="nombre" name="nombre" required placeholder="JUAN CARLOS">
        </div>

        <div class="form-group">
            <label for="apellidos">
                Apellidos <span class="required">*</span>
                <span class="field-hint">Solo letras mayúsculas</span>
            </label>
            <input type="text" id="apellidos" name="apellidos" required placeholder="GARCÍA LÓPEZ">
        </div>

        <div class="form-group">
            <label for="rfc">
                RFC <span class="required">*</span>
                <span class="field-hint">4 letras + 6 números + 3 alfanuméricos (13 caracteres)</span>
            </label>
            <input type="text" id="rfc" name="rfc" maxlength="13" required placeholder="GABC850101ABC">
        </div>

        <div class="form-group">
            <label for="correo">
                Correo Electrónico <span class="required">*</span>
            </label>
            <input type="email" id="correo" name="correo" required placeholder="ejemplo@correo.com">
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="esAdministrador" name="esAdministrador"
                   onchange="togglePassword()">
            <label for="esAdministrador">Es Administrador</label>
        </div>

        <div class="form-group password-field" id="passwordField">
            <label for="password">
                Contraseña <span class="required">*</span>
                <span class="field-hint">Mínimo 8 caracteres: 1 mayúscula, 1 minúscula, 1 número y 1 símbolo (!@#$%^&)</span>
            </label>
            <input type="password" id="password" name="password" placeholder="Ejemplo123!">
        </div>

        <div class="button-group">
            <button type="submit" class="btn-submit">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="currentColor" stroke-width="2"/>
                    <path d="M17 21v-8H7v8M7 3v5h8" stroke="currentColor" stroke-width="2"/>
                </svg>
                Registrar
            </button>
            <a th:href="@{/home}" class="btn-back">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                    <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Regresar
            </a>
        </div>
    </form>
</div>

<script>
    function togglePassword() {
        const checkbox = document.getElementById('esAdministrador');
        const passwordField = document.getElementById('passwordField');
        const passwordInput = document.getElementById('password');

        if (checkbox.checked) {
            passwordField.classList.add('active');
            passwordInput.required = true;
        } else {
            passwordField.classList.remove('active');
            passwordInput.required = false;
            passwordInput.value = '';
        }
    }

    // Inicializar el estado al cargar la página
    document.addEventListener('DOMContentLoaded', function() {
        togglePassword();
    });
</script>
</body>
</html>